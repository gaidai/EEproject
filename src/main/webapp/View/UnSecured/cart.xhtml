<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:b="http://bootsfaces.net/ui"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<ui:composition template="/resources/composition.xhtml">
    <ui:define name="title">My shopping cart </ui:define>
    <ui:define name="content">
    <p:spacer height="40px" width="100%"/>
    <b:container id="main-container" style="margin-right: 20%; margin-left: 20%; background-color: #f4feff ; border-radius: 20px ; min-height: 800px"> 
        <p:spacer height="30px" width="100%"/>
        <p:growl id="growl" globalOnly="true" />
        <b:row>
            <b:column col-lg="6">
                <b:form >  
                    <p:commandButton  value="Clear the cart" actionListener="#{cart.clearCart()}" update="growl, navcart, main-container" ajax="true">
                        <p:confirm header="You want to clear the shopping cart ?" message="Are you sure?" icon="ui-icon-alert" />
                    </p:commandButton>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </b:form >                 
            </b:column >
             <b:column col-lg="3" >
                 <h:outputText class="price" id ="totalprice" value=" Total Price : #{cart.totalPrice()} UAH" rendered="#{cart.totalPrice() gt 0}" />
            </b:column>
        </b:row>
        
            <p:spacer height="20px" width="100%"/>
            
            <p:dataGrid id="list" value="#{cart.mycart}" var="p" emptyMessage="Your Shopping cart is clear !" >
                
                <p:outputPanel>
                    <h:panelGrid columns="3" cellpadding="5" >
                        <h:column>
                            <h:outputText value="Id:" />
                            <h:outputText value="Price" />
                            <h:outputText value="Category:" />
                        </h:column>
                        <h:column>
                            <h:outputText value="#{p.id}" style="font-weight: bold"/>
                            <h:outputText value="#{p.price}" style="font-weight: bold"/>
                            <h:outputText value="#{p.category}" style="font-weight: bold"/>
                        </h:column>
                        <h:column>
                             <b:form >
                                 <p:commandLink ajax="true" update="growl, navcart, main-container" action="#{cart.deletfromCart(p)}" ><i class="fa  fa-trash fa-lg " /></p:commandLink>
                            </b:form> 
                        </h:column>
                    </h:panelGrid>
                </p:outputPanel>
            </p:dataGrid>      
    
    </b:container>
    <p:spacer height="20"/>   
    
   </ui:define>
</ui:composition>
</html>