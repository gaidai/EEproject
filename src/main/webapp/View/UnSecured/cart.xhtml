<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:b="http://bootsfaces.net/ui"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<ui:composition template="/resources/composition.xhtml">
    <ui:define name="title">My NEW shopping cart </ui:define>
    <ui:define name="content">
    <p:spacer height="40px" width="100%"/>
    <b:container id="main-container" style="margin-right: 20%; margin-left: 20%; background-color: #f4feff ; border-radius: 20px ; min-height: 800px"> 
        <p:spacer height="30px" width="100%"/>
        <p:growl id="growl" globalOnly="true" />
        <b:row>
            <b:column col-lg="6">
                <b:form >  
                    <p:commandButton  value="Clear the cart" actionListener="#{cart.clearCart()}" update="growl, navcart, main-container" ajax="true">
                        <p:confirm header="You want to clear the shopping cart ?" message="Are you sure?" icon="ui-icon-alert" />
                    </p:commandButton>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </b:form >                 
            </b:column >
             <b:column col-lg="3" rendered="#{cart.totalPrice() gt 0}" >
                 <h:outputText class="price" id ="totalprice" value=" Total Price : #{cart.totalPrice()} UAH"  />
                 <b:button href="order.xhtml" value="Buy All"/>
            </b:column>
        </b:row>
        
            <p:spacer height="20px" width="100%"/>
                                    
            <p:dataScroller id="list" value="#{cart.mycart}" var="p" >
                    <f:facet name="header">
                        List of items
                    </f:facet>    
                    
                <b:row style="height: 100px">
                        <b:column style="width:40% ; height: 100px">
                            <a href="#{p.category}/#{p.category}.xhtml?id=#{p.id}">
                                <p:graphicImage value="/resources/products/#{p.category}/#{p.id}/1.png" height="90px" /> 
                                <p:graphicImage value="/resources/products/#{p.category}/#{p.id}/1.jpg" height="90px"/>
                            </a>
                        </b:column>
                                               
                        <b:column style="width:50% ; height: 90px"> 
                            <a href="#{p.category}/#{p.category}.xhtml?id=#{p.id}">
                            <br/><h:outputText value="#{p.brand} #{p.model}" style="font-weight: bold"/><br/>
                                <h:outputText value="Price: " />
                                <h:outputText value="#{p.price}" style="color: red; font-weight: 600 " />
                                <h:outputText value=" UAH" style="color: red " />
                            </a>
                        </b:column >
                        <b:column  style="width: 5% ; height: 80px" >
                            <b:form ><br/>
                                <p:commandLink ajax="true" update="growl, navcart, main-container" action="#{cart.deletfromCart(p)}" ><i class="fa  fa-trash fa-lg " /></p:commandLink>
                            </b:form> 
                        </b:column >
                    </b:row>
                    <hr/>
                    
                </p:dataScroller>
<!--                <p:repeat value="#{dataListView.cars1}" var="car">
                            <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                          <p:commandLink update=":form:carDetail" oncomplete="PF('carDialog').show()">
                              <f:setPropertyActionListener value="#{car}" target="#{dataListView.selectedCar}" />
                              <p:graphicImage name="demo/images/car/#{car.brand}-big.gif" /> 
                          </p:commandLink>

                          <p:outputPanel>
                              <h:panelGrid columns="2" cellpadding="5">
                                  <h:outputText value="Id:" />
                                  <h:outputText value="#{car.id}" style="font-weight: bold"/>

                                  <h:outputText value="Year:" />
                                  <h:outputText value="#{car.year}" style="font-weight: bold"/>

                                  <h:outputText value="Color:" />
                                  <h:outputText value="#{car.color}" style="font-weight: bold"/>
                              </h:panelGrid>
                          </p:outputPanel>
                      </h:panelGrid>
                      <hr />
                </p:repeat>-->
            <p:spacer height="20"/>
            <b:button  href="order.xhtml" value="Buy All" look="info"   rendered="#{cart.totalPrice() gt 0}"/>
           
            <br/>
            <div>
                <p:clock   pattern="HH:mm:ss dd.MM.yyyy"  />
            </div>
                
            <br/>
                
    </b:container>
    <p:spacer height="20"/> 
   
    
   </ui:define>
</ui:composition>
</html>